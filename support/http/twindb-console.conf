<IfVersion < 2.4>
     NameVirtualHost *:443
</IfVersion>

<IfModule !rewrite_module>
    LoadModule rewrite_module modules/mod_rewrite.so
</IfModule>

<VirtualHost *:80>
    ServerName console.twindb.com
    # Add your custom virtual-host here
    # ServerAlias twindb-console.my-company.com


    RewriteEngine on
    RewriteCond %{SERVER_PORT} ^80$
    RewriteRule ^/?(.*)  https://%{HTTP_HOST}/$1 [L,R=permanent]
</VirtualHost>

<VirtualHost *:443>
    DocumentRoot /usr/share/twindb/console
    ServerName console.twindb.com
    ServerAlias console.dev.twindb.com
    # Add your custom virtual-host here
    # ServerAlias twindb-console.my-company.com

    <IfVersion >= 2.4>
        <directory /usr/share/twindb/console>
            Require all granted
            AllowOverride all
        </directory>
    </IfVersion>

    <IfModule mod_deflate.c>
        AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/javascript
    </IfModule>

    # SSL
    SSLEngine  on
    SSLProtocol all -SSLv2
    SSLCipherSuite HIGH:!aNULL:!MD5
    SSLHonorCipherOrder on
    SSLCertificateFile /etc/twindb/httpd/conf/ssl.crt/twindb_com.crt
    SSLCertificateKeyFile /etc/twindb/httpd/conf/ssl.key/twindb_com.key
    SSLCertificateChainFile /etc/twindb/httpd/conf/ssl.crt/ca-bundle-client.crt

    # Logging
    ErrorLog /var/log/twindb/console.twindb.com-error_log
    TransferLog /var/log/twindb/console.twindb.com-access_log
</VirtualHost>

<VirtualHost *:80>
    ServerName console.dev.twindb.com
    DocumentRoot /home/vagrant/src/twindb/www/workspace/
</VirtualHost>
